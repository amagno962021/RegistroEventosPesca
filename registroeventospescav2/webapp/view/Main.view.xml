<mvc:View xmlns:mvc="sap.ui.core.mvc" xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:tnt="sap.tnt" controllerName="com.tasa.registroeventospescav2.controller.Main" displayBlock="true" height="100%">
   <SplitApp>
      <masterPages>
         <Page title="Plantas">
            <tnt:NavigationList id="navigationList" width="auto" items="{PlantasModel>/Items}" itemSelect="onSearchMarea">
               <tnt:NavigationListItem text="{PlantasModel>text}" icon="{PlantasModel>ref}" items="{path: 'PlantasModel>nodes', templateShareable:false}" expanded="false" select="onSelectItemList">
                  <tnt:NavigationListItem text="{PlantasModel>text}" icon="sap-icon://factory" />
               </tnt:NavigationListItem>
            </tnt:NavigationList>
         </Page>
      </masterPages>
      <detailPages>
         <Page title="Detalle de Mareas">
            <content>
               <ObjectHeader id="idObjectHeader" icon="sap-icon://factory" titleActive="false" backgroundDesign="Translucent" numberUnit="Tn" numberState="Success" number="{ListaMareas>/Utils/TotalPescDecl}"/>
               <IconTabBar id="idIconTabBar" expandable="false" expanded="true" applyContentPadding="false" backgroundDesign="Solid" upperCase="false" visible="true" select="onSelectTab" selectedKey="{ListaMareas>/Utils/SelectedKey}">
                  <items>
                     <IconTabFilter id="itfPropios" icon="sap-icon://person-placeholder" iconColor="Default" text="Propios" design="Vertical" showAll="false" textDirection="Inherit" enabled="true" visible="true" iconDensityAware="false" count="{ListaMareas>/Utils/CountPropios}">
                        <content>
                           <Table id="tblMareasPropios" width="auto" noDataText="No data" growing="true" growingThreshold="10" growingScrollToLoad="true" class="sapUiResponsiveMargin" items="{path:'ListaMareas>/PropiosFiltro', templateShareable:true}">
                              <infoToolbar />
                              <columns>
                                 <Column width="5%" hAlign="Left" vAlign="Middle" minScreenWidth="Tablet" demandPopin="true" popinDisplay="Inline" mergeDuplicates="false">
                                    <header>
                                       <Text text="Nro." width="auto" maxLines="1" wrapping="false" textAlign="Center" textDirection="Inherit" visible="true" />
                                    </header>
                                    <footer />
                                 </Column>
                                 <Column width="10%" hAlign="Left" vAlign="Middle" minScreenWidth="Tablet" demandPopin="true" popinDisplay="Inline" mergeDuplicates="false">
                                    <header>
                                       <Text text="Marea" width="auto" maxLines="1" wrapping="false" textAlign="Begin" textDirection="Inherit" visible="true" />
                                    </header>
                                    <footer />
                                 </Column>
                                 <Column width="12%" hAlign="Left" vAlign="Middle" minScreenWidth="Tablet" demandPopin="true" popinDisplay="Inline" mergeDuplicates="false">
                                    <header>
                                       <Text text="Embarcación" width="auto" maxLines="1" wrapping="false" textAlign="Begin" textDirection="Inherit" visible="true" />
                                    </header>
                                    <footer />
                                 </Column>
                                 <Column width="10%" hAlign="Left" vAlign="Middle" minScreenWidth="Tablet" demandPopin="true" popinDisplay="Inline" mergeDuplicates="false">
                                    <header>
                                       <Text text="Mot. Marea" width="auto" maxLines="1" wrapping="false" textAlign="Begin" textDirection="Inherit" visible="true" />
                                    </header>
                                    <footer />
                                 </Column>
                                 <Column width="10%" hAlign="Left" vAlign="Middle" minScreenWidth="Tablet" demandPopin="true" popinDisplay="Inline" mergeDuplicates="false">
                                    <header>
                                       <Text text="Est. Oper." width="auto" maxLines="1" wrapping="false" textAlign="Begin" textDirection="Inherit" visible="true" />
                                    </header>
                                    <footer />
                                 </Column>
                                 <Column width="10%" hAlign="Left" vAlign="Middle" minScreenWidth="Tablet" demandPopin="true" popinDisplay="Inline" mergeDuplicates="false">
                                    <header>
                                       <Text text="Pesc. Dec." width="auto" maxLines="1" wrapping="false" textAlign="Begin" textDirection="Inherit" visible="true" />
                                    </header>
                                    <footer />
                                 </Column>
                                 <Column width="15%" hAlign="Left" vAlign="Middle" minScreenWidth="Tablet" demandPopin="true" popinDisplay="Inline" mergeDuplicates="false">
                                    <header>
                                       <Text text="Fecha/Hora Arribo" width="auto" maxLines="2" wrapping="true" textAlign="Begin" textDirection="Inherit" visible="true" />
                                    </header>
                                    <footer />
                                 </Column>
                                 <Column width="8%" hAlign="Left" vAlign="Middle" minScreenWidth="Tablet" demandPopin="true" popinDisplay="Inline" mergeDuplicates="false">
                                    <header>
                                       <Text text="Estado" width="auto" maxLines="2" wrapping="true" textAlign="Begin" textDirection="Inherit" visible="true" />
                                    </header>
                                    <footer />
                                 </Column>
                                 <Column width="5%" hAlign="Left" vAlign="Middle" minScreenWidth="Tablet" demandPopin="true" popinDisplay="Inline" mergeDuplicates="false">
                                    <header>
                                       <Text text="" width="auto" maxLines="2" wrapping="true" textAlign="Begin" textDirection="Inherit" visible="true" />
                                    </header>
                                    <footer />
                                 </Column>
                                 <Column width="5%" hAlign="Left" vAlign="Middle" minScreenWidth="Tablet" demandPopin="true" popinDisplay="Inline" mergeDuplicates="false">
                                    <header>
                                       <Text text="" width="auto" maxLines="2" wrapping="true" textAlign="Begin" textDirection="Inherit" visible="true" />
                                    </header>
                                    <footer />
                                 </Column>
                              </columns>
                              <items>
                                 <ColumnListItem type="Active" press="onNavToDetailMaster">
                                    <customData>
                                       <core:CustomData key="mydata" value="{ListaMareas>ESMAR}" writeToDom="true" />
                                    </customData>
                                    <cells>
                                       <Text text="{ListaMareas>NRO}" width="auto" maxLines="1" wrapping="false" textAlign="Begin" textDirection="Inherit" visible="true" />
                                       <Text text="{ListaMareas>NRMAR}" width="auto" maxLines="1" wrapping="false" textAlign="Begin" textDirection="Inherit" visible="true" />
                                       <Text text="{ListaMareas>NMEMB}" width="auto" maxLines="2" wrapping="true" textAlign="Begin" textDirection="Inherit" visible="true" />
                                       <Text text="{ListaMareas>DESC_CDMMA}" width="auto" maxLines="1" wrapping="false" textAlign="Begin" textDirection="Inherit" visible="true" />
                                       <Text text="{ListaMareas>DSEEC}" width="auto" maxLines="1" wrapping="false" textAlign="Begin" textDirection="Inherit" visible="true" />
                                       <ObjectNumber number="{ListaMareas>CNPCM}" unit="Tn" />
                                       <Text text="{ListaMareas>FEHOARR}" width="auto" maxLines="1" wrapping="false" textAlign="Begin" textDirection="Inherit" visible="true" />
                                       <Text text="{ListaMareas>DESC_ESMAR}" width="auto" maxLines="1" wrapping="false" textAlign="Begin" textDirection="Inherit" visible="true" />
                                       <Link text="{ListaMareas>DESCLINK}" width="auto" wrapping="false" textAlign="Begin" textDirection="Inherit" visible="true" press="onEditarCrearMarea" />
                                       <Link text="Anular" width="auto" wrapping="false" textAlign="Begin" textDirection="Inherit" visible="{ListaMareas>visibleAnularMarea}" press="onAnularMarea"/>
                                    </cells>
                                 </ColumnListItem>
                              </items>
                           </Table>
                        </content>
                     </IconTabFilter>
                     <IconTabSeparator icon="" iconDensityAware="false" />
                     <IconTabFilter id="itfTerceros" icon="sap-icon://group" iconColor="Default" text="Terceros" design="Vertical" showAll="false" textDirection="Inherit" enabled="true" visible="true" iconDensityAware="false" count="{ListaMareas>/Utils/CountTerceros}">
                        <content>
                           <Table id="tblMareasTerceros" width="auto" noDataText="No data" mode="None" showSeparators="All" growing="true" growingThreshold="20" growingScrollToLoad="true" class="sapUiResponsiveMargin" items="{path:'ListaMareas>/TercerosFiltro', templateShareable:true}">
                              <infoToolbar />
                              <columns>
                                 <Column width="5%" hAlign="Left" vAlign="Middle" minScreenWidth="Tablet" demandPopin="true" popinDisplay="Inline" mergeDuplicates="false">
                                    <header>
                                       <Text text="Nro." width="auto" maxLines="1" wrapping="false" textAlign="Center" textDirection="Inherit" visible="true" />
                                    </header>
                                    <footer />
                                 </Column>
                                 <Column width="10%" hAlign="Left" vAlign="Middle" minScreenWidth="Tablet" demandPopin="true" popinDisplay="Inline" mergeDuplicates="false">
                                    <header>
                                       <Text text="Marea" width="auto" maxLines="1" wrapping="false" textAlign="Begin" textDirection="Inherit" visible="true" />
                                    </header>
                                    <footer />
                                 </Column>
                                 <Column width="12%" hAlign="Left" vAlign="Middle" minScreenWidth="Tablet" demandPopin="true" popinDisplay="Inline" mergeDuplicates="false">
                                    <header>
                                       <Text text="Embarcación" width="auto" maxLines="1" wrapping="false" textAlign="Begin" textDirection="Inherit" visible="true" />
                                    </header>
                                    <footer />
                                 </Column>
                                 <Column width="10%" hAlign="Left" vAlign="Middle" minScreenWidth="Tablet" demandPopin="true" popinDisplay="Inline" mergeDuplicates="false">
                                    <header>
                                       <Text text="Mot. Marea" width="auto" maxLines="1" wrapping="false" textAlign="Begin" textDirection="Inherit" visible="true" />
                                    </header>
                                    <footer />
                                 </Column>
                                 <Column width="10%" hAlign="Left" vAlign="Middle" minScreenWidth="Tablet" demandPopin="true" popinDisplay="Inline" mergeDuplicates="false">
                                    <header>
                                       <Text text="Est. Oper." width="auto" maxLines="1" wrapping="false" textAlign="Begin" textDirection="Inherit" visible="true" />
                                    </header>
                                    <footer />
                                 </Column>
                                 <Column width="10%" hAlign="Left" vAlign="Middle" minScreenWidth="Tablet" demandPopin="true" popinDisplay="Inline" mergeDuplicates="false">
                                    <header>
                                       <Text text="Pesc. Dec." width="auto" maxLines="1" wrapping="false" textAlign="Begin" textDirection="Inherit" visible="true" />
                                    </header>
                                    <footer />
                                 </Column>
                                 <Column width="15%" hAlign="Left" vAlign="Middle" minScreenWidth="Tablet" demandPopin="true" popinDisplay="Inline" mergeDuplicates="false">
                                    <header>
                                       <Text text="Fecha/Hora Arribo" width="auto" maxLines="2" wrapping="true" textAlign="Begin" textDirection="Inherit" visible="true" />
                                    </header>
                                    <footer />
                                 </Column>
                                 <Column width="8%" hAlign="Left" vAlign="Middle" minScreenWidth="Tablet" demandPopin="true" popinDisplay="Inline" mergeDuplicates="false">
                                    <header>
                                       <Text text="Estado" width="auto" maxLines="2" wrapping="true" textAlign="Begin" textDirection="Inherit" visible="true" />
                                    </header>
                                    <footer />
                                 </Column>
                                 <Column width="5%" hAlign="Left" vAlign="Middle" minScreenWidth="Tablet" demandPopin="true" popinDisplay="Inline" mergeDuplicates="false">
                                    <header>
                                       <Text text="" width="auto" maxLines="2" wrapping="true" textAlign="Begin" textDirection="Inherit" visible="true" />
                                    </header>
                                    <footer />
                                 </Column>
                                 <Column width="5%" hAlign="Left" vAlign="Middle" minScreenWidth="Tablet" demandPopin="true" popinDisplay="Inline" mergeDuplicates="false">
                                    <header>
                                       <Text text="" width="auto" maxLines="2" wrapping="true" textAlign="Begin" textDirection="Inherit" visible="true" />
                                    </header>
                                    <footer />
                                 </Column>
                              </columns>
                              <items>
                                 <ColumnListItem type="Active">
                                    <customData>
                                       <core:CustomData key="mydata" value="{ListaMareas>ESMAR}" writeToDom="true" />
                                    </customData>
                                    <cells>
                                       <Text text="{ListaMareas>NRO}" width="auto" maxLines="1" wrapping="false" textAlign="Begin" textDirection="Inherit" visible="true" />
                                       <Text text="{ListaMareas>NRMAR}" width="auto" maxLines="1" wrapping="false" textAlign="Begin" textDirection="Inherit" visible="true" />
                                       <Text text="{ListaMareas>NMEMB}" width="auto" maxLines="2" wrapping="true" textAlign="Begin" textDirection="Inherit" visible="true" />
                                       <Text text="{ListaMareas>DESCMOTMAR}" width="auto" maxLines="1" wrapping="false" textAlign="Begin" textDirection="Inherit" visible="true" />
                                       <Text text="{ListaMareas>DSEEC}" width="auto" maxLines="1" wrapping="false" textAlign="Begin" textDirection="Inherit" visible="true" />
                                       <ObjectNumber number="{ListaMareas>CNPCM}" unit="Tn" />
                                       <Text text="{ListaMareas>FEHOARR}" width="auto" maxLines="1" wrapping="false" textAlign="Begin" textDirection="Inherit" visible="true" />
                                       <Text text="{ListaMareas>DESCESMAR}" width="auto" maxLines="1" wrapping="false" textAlign="Begin" textDirection="Inherit" visible="true" />
                                       <Link text="{ListaMareas>DESCLINK}" width="auto" wrapping="false" textAlign="Begin" textDirection="Inherit" visible="true" press="onEditarCrearMarea" />
                                       <Link text="Anular" width="auto" wrapping="false" textAlign="Begin" textDirection="Inherit" visible="{ListaMareas>visibleAnularMarea}" press="onAnularMarea"/>
                                    </cells>
                                 </ColumnListItem>
                              </items>
                           </Table>
                        </content>
                     </IconTabFilter>
                  </items>
               </IconTabBar>
            </content>
            <footer>
               <OverflowToolbar width="auto" height="auto" design="Auto" enabled="true" visible="true">
                  <content>
                     <Button id="messagePopoverBtnMain" icon="{ path: '/', formatter: 'buttonIconFormatter' }" type="{ path: '/', formatter: 'buttonTypeFormatter' }" text= "{path: '/', formatter: 'highestSeverityMessages' }" press="handleMessagePopoverPress"/>
                     <ToolbarSpacer width="" />
                     <Button text="Nueva Marea" type="Default" iconFirst="true" width="auto" enabled="true" visible="true" iconDensityAware="false" press="onActionCrearMarea" />
                     <Button text="Actualizar" type="Default" iconFirst="true" width="auto" enabled="true" visible="true" iconDensityAware="false" press="onActualizaMareas" />
                     <Button text="Pesca Declarada" type="Default" iconFirst="true" width="auto" enabled="true" visible="true" iconDensityAware="false" press="onTest" />
                     <Button text="BOTON DE PRUEBAS" type="Default" icon="sap-icon://delete" iconFirst="true" width="auto" enabled="true" visible="false"
								iconDensityAware="false" press="onCallUsuario"/>
                  </content>
               </OverflowToolbar>
            </footer>
         </Page>
      </detailPages>
   </SplitApp>
</mvc:View>